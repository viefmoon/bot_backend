{
    "messages": [
        {
          "role": "system",
          "content": "{\"menu_disponible\":[{\"productId\":\"A\",\"name\":\"Alitas\",\"variants\":[{\"variantId\":\"AV1\",\"name\":\"Orden de Alitas BBQ\"},{\"variantId\":\"AV2\",\"name\":\"Media Orden de Alitas BBQ\"},{\"variantId\":\"AV3\",\"name\":\"Orden de Alitas Picosas\"},{\"variantId\":\"AV4\",\"name\":\"Media Orden de Alitas Picosas\"},{\"variantId\":\"AV5\",\"name\":\"Orden de Alitas Fritas\"},{\"variantId\":\"AV6\",\"name\":\"Media Orden de Alitas Fridas\"},{\"variantId\":\"AV7\",\"name\":\"Orden de Alitas Mixtas BBQ y picosas\"}],\"modifiers\":[{\"modifierId\":\"AM1-1\",\"name\":\"Mas doradas\"},{\"modifierId\":\"AM1-2\",\"name\":\"Menos doradas\"},{\"modifierId\":\"AM1-3\",\"name\":\"Extra salsa\"},{\"modifierId\":\"AM1-4\",\"name\":\"Arregladas con verdura y totopos\"},{\"modifierId\":\"AM1-5\",\"name\":\"Aderezo ranch\"},{\"modifierId\":\"AM1-6\",\"name\":\"Salsa picosa aparte\"},{\"modifierId\":\"AM1-7\",\"name\":\"Salsa BBQ aparte\"},{\"modifierId\":\"AM1-8\",\"name\":\"Extra chile de aceite\"}]},{\"productId\":\"P\",\"name\":\"Papas gratinadas\",\"variants\":[{\"variantId\":\"PV1\",\"name\":\"Orden de Papas gratinadas a la Francesa\"},{\"variantId\":\"PV2\",\"name\":\"Media Orden de Papas a la Francesa\"},{\"variantId\":\"PV3\",\"name\":\"Orden de Papas gratinadas Gajos\"},{\"variantId\":\"PV4\",\"name\":\"Media Orden de Papas gratinadas Gajos\"},{\"variantId\":\"PV5\",\"name\":\"Orden de Papas gratinadas Mixtas francesa y gajos\"}],\"modifiers\":[{\"modifierId\":\"PM1-1\",\"name\":\"Sin queso\"},{\"modifierId\":\"PM1-2\",\"name\":\"Extra aderezo\"},{\"modifierId\":\"PM1-3\",\"name\":\"Con chile de aceite\"}]},{\"productId\":\"D\",\"name\":\"Dedos de Queso\"},{\"productId\":\"E\",\"name\":\"Ensaladas\",\"variants\":[{\"variantId\":\"EV1\",\"name\":\"Ensalada de Pollo Chica\"},{\"variantId\":\"EV2\",\"name\":\"Ensalada de Pollo Grande\"},{\"variantId\":\"EV3\",\"name\":\"Ensalada de Jamón Chica\"},{\"variantId\":\"EV4\",\"name\":\"Ensalada de Jamón Grande\"},{\"variantId\":\"EV5\",\"name\":\"Ensalada Vegetal Chica\"},{\"variantId\":\"EV6\",\"name\":\"Ensalada Vegetal Grande\"}],\"modifiers\":[{\"modifierId\":\"EM1-1\",\"name\":\"Con jamon\"},{\"modifierId\":\"EM1-2\",\"name\":\"Con queso\"},{\"modifierId\":\"EM1-3\",\"name\":\"Con vinagreta\"},{\"modifierId\":\"EM1-4\",\"name\":\"Doble pollo\"},{\"modifierId\":\"EM1-5\",\"name\":\"Doble vinagreta\"},{\"modifierId\":\"EM1-6\",\"name\":\"Aderezo aparte\"}]},{\"productId\":\"H\",\"name\":\"Hamburguesas\",\"variants\":[{\"variantId\":\"HV1\",\"name\":\"Hamburgesa Tradicional\"},{\"variantId\":\"HV2\",\"name\":\"Hamburgesa Especial\"},{\"variantId\":\"HV3\",\"name\":\"Hamburgesa Hawaiana\"},{\"variantId\":\"HV4\",\"name\":\"Hamburgesa Pollo\"},{\"variantId\":\"HV5\",\"name\":\"Hamburgesa BBQ\"},{\"variantId\":\"HV6\",\"name\":\"Hamburgesa Lenazo\"},{\"variantId\":\"HV7\",\"name\":\"Hamburgesa Cubana\"}],\"modifiers\":[{\"modifierId\":\"HM1-1\",\"name\":\"Con papas francesa\"},{\"modifierId\":\"HM1-2\",\"name\":\"Con papas francesa gratinadas\"},{\"modifierId\":\"HM1-3\",\"name\":\"Con gajos\"},{\"modifierId\":\"HM1-4\",\"name\":\"Con gajos gratinadas\"},{\"modifierId\":\"HM1-5\",\"name\":\"Con papas mixtas\"},{\"modifierId\":\"HM1-6\",\"name\":\"Con papas mixtas gratinadas\"},{\"modifierId\":\"HM2-1\",\"name\":\"Partida en 2 mitades\"},{\"modifierId\":\"HM2-3\",\"name\":\"Doble carne o pollo\"},{\"modifierId\":\"HM2-4\",\"name\":\"Pollo en lugar de carne de res\"},{\"modifierId\":\"HM2-5\",\"name\":\"Con ensalada\"},{\"modifierId\":\"HM2-6\",\"name\":\"Carne bien dorada\"}]},{\"productId\":\"AH\",\"name\":\"Agua fresca de horchata 1 Litro\"},{\"productId\":\"LIM\",\"name\":\"Limonada 1 Litro\"},{\"productId\":\"LIMM\",\"name\":\"Limonada Mineral 1 Litro\"},{\"productId\":\"RCC\",\"name\":\"Refresco de Coca Cola\"},{\"productId\":\"R7UP\",\"name\":\"Refresco 7up\"},{\"productId\":\"RMIR\",\"name\":\"Refresco Mirinda\"},{\"productId\":\"RSAN\",\"name\":\"Refresco de Sangría\"},{\"productId\":\"RAM\",\"name\":\"Agua Mineral\"},{\"productId\":\"RSQU\",\"name\":\"Squirt\"},{\"productId\":\"SANP\",\"name\":\"Sangría preparada\"},{\"productId\":\"MICH\",\"name\":\"Micheladas\",\"variants\":[{\"variantId\":\"MV1\",\"name\":\"Michelada clara\"},{\"variantId\":\"MV2\",\"name\":\"Michelada oscura\"}]},{\"productId\":\"CA\",\"name\":\"Café Americano\"},{\"productId\":\"CP\",\"name\":\"Capuchino\"},{\"productId\":\"CH\",\"name\":\"Chocolate\"},{\"productId\":\"MC\",\"name\":\"Mocachino\"},{\"productId\":\"LV\",\"name\":\"Latte Vainilla\"},{\"productId\":\"LC\",\"name\":\"Latte Capuchino\"},{\"productId\":\"F\",\"name\":\"Frappés\",\"variants\":[{\"variantId\":\"FV1\",\"name\":\"Frappe Capuchino\"},{\"variantId\":\"FV2\",\"name\":\"Frappe Coco\"},{\"variantId\":\"FV3\",\"name\":\"Frappe Caramelo\"},{\"variantId\":\"FV4\",\"name\":\"Frappe Cajeta\"},{\"variantId\":\"FV5\",\"name\":\"Frappe Mocaccino\"},{\"variantId\":\"FV6\",\"name\":\"Frappe Galleta\"},{\"variantId\":\"FV7\",\"name\":\"Frappe Bombon\"},{\"variantId\":\"FV8\",\"name\":\"Frappe Rompope\"},{\"variantId\":\"FV9\",\"name\":\"Frappe Mazapan\"},{\"variantId\":\"FV10\",\"name\":\"Frappe Magnum\"}]},{\"productId\":\"CV\",\"name\":\"Copa de vino\"},{\"productId\":\"SV\",\"name\":\"Sangría con vino\"},{\"productId\":\"VAMP\",\"name\":\"Vampiro\"},{\"productId\":\"GMAR\",\"name\":\"Gin de Maracuyá\"},{\"productId\":\"MAR\",\"name\":\"Margarita\"},{\"productId\":\"RBL\",\"name\":\"Ruso Blanco\"},{\"productId\":\"PSAN\",\"name\":\"Palo santo\"},{\"productId\":\"GPEP\",\"name\":\"Gin de pepino\"},{\"productId\":\"MOJ\",\"name\":\"Mojito\"},{\"productId\":\"PCOL\",\"name\":\"Piña colada\"},{\"productId\":\"PINA\",\"name\":\"Piñada\"},{\"productId\":\"CG\",\"name\":\"Conga\"},{\"productId\":\"DEST\",\"name\":\"Destornillador\"},{\"productId\":\"PAL\",\"name\":\"Paloma\"},{\"productId\":\"CARAJ\",\"name\":\"Carajillo\"},{\"productId\":\"TV\",\"name\":\"Tinto de verano\"},{\"productId\":\"CLERI\",\"name\":\"Clericot\"},{\"productId\":\"PZ\",\"name\":\"Pizza\",\"variants\":[{\"variantId\":\"PZ-V-G\",\"name\":\"Pizza Grande\"},{\"variantId\":\"PZ-V-M\",\"name\":\"Pizza Mediana\"},{\"variantId\":\"PZ-V-CH\",\"name\":\"Pizza Chica\"},{\"variantId\":\"PZ-V-GR\",\"name\":\"Pizza Grande Con Orilla Rellena de Queso\"},{\"variantId\":\"PZ-V-MR\",\"name\":\"Pizza Mediana Con Orilla Rellena de Queso\"},{\"variantId\":\"PZ-V-CHR\",\"name\":\"Pizza Chica Con Orilla Rellena de Queso\"}],\"pizzaIngredients\":[{\"pizzaIngredientId\":\"PZ-I-1\",\"name\":\"Especial\"},{\"pizzaIngredientId\":\"PZ-I-2\",\"name\":\"Carnes Frías\"},{\"pizzaIngredientId\":\"PZ-I-3\",\"name\":\"Carranza\"},{\"pizzaIngredientId\":\"PZ-I-4\",\"name\":\"Zapata\"},{\"pizzaIngredientId\":\"PZ-I-5\",\"name\":\"Villa\"},{\"pizzaIngredientId\":\"PZ-I-6\",\"name\":\"Margarita\"},{\"pizzaIngredientId\":\"PZ-I-7\",\"name\":\"Adelita\"},{\"pizzaIngredientId\":\"PZ-I-8\",\"name\":\"Hawaiana\"},{\"pizzaIngredientId\":\"PZ-I-9\",\"name\":\"Mexicana\"},{\"pizzaIngredientId\":\"PZ-I-10\",\"name\":\"Rivera\"},{\"pizzaIngredientId\":\"PZ-I-11\",\"name\":\"Kahlo\"},{\"pizzaIngredientId\":\"PZ-I-12\",\"name\":\"Lupita\"},{\"pizzaIngredientId\":\"PZ-I-13\",\"name\":\"Pepperoni\"},{\"pizzaIngredientId\":\"PZ-I-14\",\"name\":\"La Lena\"},{\"pizzaIngredientId\":\"PZ-I-15\",\"name\":\"La Maria\"},{\"pizzaIngredientId\":\"PZ-I-16\",\"name\":\"Malinche\"},{\"pizzaIngredientId\":\"PZ-I-17\",\"name\":\"Philadelphia\"},{\"pizzaIngredientId\":\"PZ-I-18\",\"name\":\"3 Quesos\"},{\"pizzaIngredientId\":\"PZ-I-19\",\"name\":\"Albahaca\"},{\"pizzaIngredientId\":\"PZ-I-20\",\"name\":\"Arandano\"},{\"pizzaIngredientId\":\"PZ-I-21\",\"name\":\"Calabaza\"},{\"pizzaIngredientId\":\"PZ-I-22\",\"name\":\"Cebolla\"},{\"pizzaIngredientId\":\"PZ-I-23\",\"name\":\"Champinon\"},{\"pizzaIngredientId\":\"PZ-I-24\",\"name\":\"Chile Seco\"},{\"pizzaIngredientId\":\"PZ-I-25\",\"name\":\"Chorizo\"},{\"pizzaIngredientId\":\"PZ-I-26\",\"name\":\"Elote\"},{\"pizzaIngredientId\":\"PZ-I-27\",\"name\":\"Jalapeno\"},{\"pizzaIngredientId\":\"PZ-I-28\",\"name\":\"Jamon\"},{\"pizzaIngredientId\":\"PZ-I-29\",\"name\":\"Jitomate\"},{\"pizzaIngredientId\":\"PZ-I-30\",\"name\":\"Molida\"},{\"pizzaIngredientId\":\"PZ-I-31\",\"name\":\"Morron\"},{\"pizzaIngredientId\":\"PZ-I-32\",\"name\":\"Pierna\"},{\"pizzaIngredientId\":\"PZ-I-33\",\"name\":\"Pina\"},{\"pizzaIngredientId\":\"PZ-I-34\",\"name\":\"Pollo BBQ\"},{\"pizzaIngredientId\":\"PZ-I-35\",\"name\":\"Queso de cabra\"},{\"pizzaIngredientId\":\"PZ-I-36\",\"name\":\"Salami\"},{\"pizzaIngredientId\":\"PZ-I-37\",\"name\":\"Salchicha\"},{\"pizzaIngredientId\":\"PZ-I-38\",\"name\":\"Tocino\"}],\"modifiers\":[{\"modifierId\":\"PZ-M1-1\",\"name\":\"Partida en 16 pedazos\"},{\"modifierId\":\"PZ-M1-2\",\"name\":\"mas doradita\"},{\"modifierId\":\"PZ-M1-3\",\"name\":\"poco queso\"},{\"modifierId\":\"PZ-M1-4\",\"name\":\"sin queso\"},{\"modifierId\":\"PZ-M1-5\",\"name\":\"sin salsa de tomate\"},{\"modifierId\":\"PZ-M1-6\",\"name\":\"extra salsa de tomate\"},{\"modifierId\":\"PZ-M1-7\",\"name\":\"con catsup\"},{\"modifierId\":\"PZ-M1-8\",\"name\":\"doble aderezo\"},{\"modifierId\":\"PZ-M1-9\",\"name\":\"doble chile de aceite\"}]}]}"
        },
        {
            "role": "user",
            "content": "Quiero ordenar una orden de papas a la francesa con queso y doble aderezo y una grande mitad lupita sin cebolla y la otra mitad carranza sin jitomate a degollado 33 norte"
          },
          {
            "role": "assistant",
            "tool_calls": [
              {
                "id": "call_1",
                "type": "function",
                "function": {
                  "name": "select_products",
                  "arguments": "{\"orderItems\": [{\"productId\": \"P\", \"productVariantId\": \"PV1\", \"selectedModifiers\": [{\"modifierId\": \"PM1-2\"}], \"comments\": \"Con queso\", \"quantity\": 1}, {\"productId\": \"PZ\", \"productVariantId\": \"PZ-V-G\", \"selectedPizzaIngredients\": [{\"pizzaIngredientId\": \"PZ-I-12\", \"half\": \"left\", \"action\": \"add\"}, {\"pizzaIngredientId\": \"PZ-I-22\", \"half\": \"left\", \"action\": \"remove\"}, {\"pizzaIngredientId\": \"PZ-I-3\", \"half\": \"right\", \"action\": \"add\"}, {\"pizzaIngredientId\": \"PZ-I-29\", \"half\": \"right\", \"action\": \"remove\"}], \"quantity\": 1}], \"orderType\": \"delivery\", \"deliveryInfo\": \"degollado 33 norte\"}"
                }
              }
            ]
          }
  ],
  "tools": [
      {
          "type": "function",
          "function": {
              "name": "select_products",
              "description": "Genera un resumen de los productos seleccionados y crea una preorden.",
              "strict": false,
              "parameters": {
                  "type": "object",
                  "properties": {
                      "orderItems": {
                          "type": "array",
                          "description": "Lista de ítems pedidos.",
                          "items": {
                              "type": "object",
                              "properties": {
                                  "productId": {
                                      "type": "string",
                                      "description": "ID del producto."
                                  },
                                  "productVariantId": {
                                      "type": ["string"],
                                      "description": "ID de la variante del producto (si aplica)."
                                  },
                                  "selectedPizzaIngredients": {
                                      "type": "array",
                                      "description": "Lista de ingredientes seleccionados para la pizza (si aplica).",
                                      "items": {
                                          "type": "object",
                                          "properties": {
                                              "pizzaIngredientId": {
                                                  "type": "string",
                                                  "description": "ID del ingrediente de la pizza."
                                              },
                                              "half": {
                                                  "type": "string",
                                                  "enum": ["full", "left", "right"],
                                                  "description": "Mitad de la pizza donde se coloca el ingrediente."
                                              },
                                              "action": {
                                                  "type": "string",
                                                  "enum": ["add", "remove"],
                                                  "description": "Acción a realizar con el ingrediente: añadir o quitar."
                                              }
                                          },
                                          "required": ["pizzaIngredientId", "half", "action"],
                                          "additionalProperties": false
                                      }
                                  },
                                  "selectedModifiers": {
                                      "type": "array",
                                      "description": "Lista de modificadores seleccionados (si aplica).",
                                      "items": {
                                          "type": "object",
                                          "properties": {
                                              "modifierId": {
                                                  "type": "string",
                                                  "description": "ID del modificador."
                                              }
                                          },
                                          "required": ["modifierId"],
                                          "additionalProperties": false
                                      }
                                  },
                                  "comments": {
                                      "type": ["string"],
                                      "description": "Comentarios del producto."
                                  },
                                  "quantity": {
                                      "type": "integer",
                                      "description": "Cantidad del ítem."
                                  }
                              },
                              "required": ["productId", "quantity"],
                              "additionalProperties": false
                          }
                      },
                      "orderType": {
                          "type": ["string"],
                          "enum": ["delivery", "pickup"],
                          "description": "Entrega a domicilio o recoleccion en restuarante."
                      },
                      "deliveryInfo": {
                          "type": "string",
                          "description": "Dirección de entrega para pedidos a domicilio o nombre de cliente para pedidos de recoleccion en el restautante."
                      }
                  },
                  "required": ["orderItems", "orderType", "deliveryInfo"],
                  "additionalProperties": false
              }
          }
      }
  ]
}